<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>z 1</title>
	<style>
		body { margin: 0; padding: 0; font-size: 0; }
		canvas { width: 100%; height: 100%; }
	</style>
</head>
<body>
<script src="js/three.min.js"></script>
<script>
	var WIDTH = window.innerWidth;
	var HEIGHT = window.innerHeight;

document.addEventListener('keydown',onDocumentKeyDown,false);
document.addEventListener('keyup',onDocumentKeyUp,false);



var speedX = 0;
var speedZ = 0;
var t = 0.99;


function onDocumentKeyUp(event){
	event = event || window.event;
	var keycode = event.keyCode;
	switch(keycode){
	case 37:
	console.log("left down");
	break;
	case 38 : console.log("up down"   );
	break;
	case 39 : console.log("right down");
	break;
	case 40 : console.log("down down" );
	break;
	}
}


function onDocumentKeyDown(event){
event = event || window.event;
var keycode = event.keyCode;
switch(keycode){
	case 37 : console.log("left up" );
	speedX -= 0.15;
	break;
	case 38 : console.log("up up"   );
	speedZ += 0.15;
	break;
	case 39 : console.log("right up");
	speedX += 0.15;
	break;
case 40 : console.log("down up" );
	speedZ -= 0.15;
	break;
}
}


	var renderer = new THREE.WebGLRenderer({antialias:true});
	renderer.setSize(WIDTH, HEIGHT);
	renderer.setClearColor(0xDDDDDD, 1);
	document.body.appendChild(renderer.domElement);

	var scene = new THREE.Scene();

	var camera = new THREE.PerspectiveCamera(50, WIDTH/HEIGHT, 0.1, 10000);
	camera.position.z = 50;
	scene.add(camera);

	var cubeGeometry = new THREE.CubeGeometry(10, 10, 10);
	var phongMaterial = new THREE.MeshPhongMaterial({color: 0xFF0000});
	var cube = new THREE.Mesh(cubeGeometry, phongMaterial);
	cube.position.x = -25;
	cube.rotation.set(0.4, 0.2, 0);
	scene.add(cube);

	var light = new THREE.PointLight(0xFFFFFF);
	light.position.set(-10, 15, 50);
	scene.add(light);


	function render() {

		if(cube.position.x < -39 || cube.position.x > 39){
			speedX = -speedX;
		}

		if(cube.position.z > 35 || cube.position.z < -400){
			speedZ = -speedZ;
		}
		speedX = speedX * t;
		speedZ  = speedZ * t;
		cube.rotation.y += 0.01;
		cube.rotation.x += 0.01;
		cube.position.z += speedZ;
		cube.rotation.x += speedZ/20;
		cube.position.x += speedX;
		cube.rotation.y += speedX/20;
		console.log("Z: " + cube.position.z + "X: " + cube.position.x + "speedZ: " + speedZ + "speedX: " +speedX);
		requestAnimationFrame(render);
		renderer.render(scene, camera);
	}
	render();
</script>
</body>
</html>
